#!/usr/bin/awk -f
# Simple environment expander utility, similar to Gettext's envsubst utility.
#
# Usage: envsubst < template > output
#
# Expands environment variables of the form ${NAME} to the variable value from
# standard input to standard output.
{
    while (match($0, "[$]{[^}]*}")) {
        var = substr($0, RSTART + 2, RLENGTH - 3);
        gsub("[$]{"var"}", ENVIRON[var], $0);
    }
    print;
}
